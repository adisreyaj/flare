<article class="relative border-b border-slate-200 p-4">
  <div class="absolute top-2 right-2 z-10">
    <button [zzDropdownTrigger]="flareMoreOptions" variant="link" zzButton>
      <rmx-icon class="icon-xs" name="more-fill"></rmx-icon>
      <zz-dropdown #flareMoreOptions>
        <div
          (click)="deleteFlare(flare)"
          class="text-red-600"
          zzDropdownCloseOnClick
          zzDropdownItem
        >
          Delete
        </div>
      </zz-dropdown>
    </button>
  </div>
  <header class="relative flex items-center justify-start">
    <div class="flex items-center gap-2">
      <img
        [alt]="flare.author.firstName"
        [src]="flare.author.image"
        class="h-10 w-10 rounded-full"
      />
      <div class="gap-2">
        <p class="text-sm font-medium">
          {{ flare.author.firstName }} {{ flare.author.lastName }}
        </p>
        <p class="text-xs">@{{ flare.author.username }}</p>
      </div>
    </div>
  </header>
  <div class="mt-4">
    <ul class="flex flex-col gap-2">
      <ng-container *ngFor="let block of flare.blocks">
        <ng-container [ngSwitch]="block?.type">
          <ng-container *ngSwitchCase="blockTypes.text">
            <flare-block-text-renderer
              [content]="block?.content"
            ></flare-block-text-renderer>
          </ng-container>
          <ng-container *ngSwitchCase="blockTypes.script">
            <flare-block-script-renderer
              [content]="block?.content"
            ></flare-block-script-renderer>
          </ng-container>
        </ng-container>
      </ng-container>
    </ul>
  </div>
  <footer class="mt-4 flex gap-4">
    <button (click)="toggleLike(flare)" size="sm" variant="link" zzButton>
      <div class="flex items-center gap-2">
        <rmx-icon [name]="flare | flareLikeIcon" class="icon-xxs"></rmx-icon>
        <p>{{ flare._count?.likes }}</p>
      </div>
    </button>
    <button class="flex items-center gap-2" size="sm" variant="link" zzButton>
      <div class="flex items-center gap-1">
        <rmx-icon class="icon-xxs" name="chat-1-line"></rmx-icon>
        <p>{{ flare._count?.comments }}</p>
      </div>
    </button>
    <button variant="link" zzButton>
      <rmx-icon class="icon-xxs" name="bookmark-line"></rmx-icon>
    </button>
    <button variant="link" zzButton>
      <rmx-icon class="icon-xxs" name="share-line"></rmx-icon>
    </button>
  </footer>
</article>
